<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-beta.36">
    <style>
      :root {
        --c-bg: #fff;
      }
      html.dark {
        --c-bg: #22272e;
      }
      html, body {
        background-color: var(--c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem('vuepress-color-scheme');
			const systemDarkMode = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
			if (userMode === 'dark' || (userMode !== 'light' && systemDarkMode)) {
				document.documentElement.classList.toggle('dark', true);
			}
    </script>
    <title>Censoring Components | CensorCore</title><meta name="description" content="A flexible framework for censoring NSFW images">
    <link rel="modulepreload" href="/censor-core/assets/app.0a9f3bc6.js"><link rel="modulepreload" href="/censor-core/assets/censoring-components.html.19410bd7.js"><link rel="modulepreload" href="/censor-core/assets/censoring-components.html.10c3a85d.js"><link rel="modulepreload" href="/censor-core/assets/plugin-vue_export-helper.21dcd24c.js">
    <link rel="stylesheet" href="/censor-core/assets/style.84fab32c.css">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container"><!--[--><header ref_key="navbar" class="navbar"><div class="toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a href="/censor-core/" class=""><img class="logo" src="/censor-core/siteIcon.png" alt="CensorCore"><span class="site-name can-hide">CensorCore</span></a></span><div class="navbar-items-wrapper" style=""><!--[--><!--]--><nav class="navbar-items can-hide"><!--[--><div class="navbar-item"><a href="/censor-core/" class="" aria-label="Introduction"><!--[--><!--]--> Introduction <!--[--><!--]--></a></div><div class="navbar-item"><a href="/censor-core/usage" class="" aria-label="Usage"><!--[--><!--]--> Usage <!--[--><!--]--></a></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="Components"><span class="title">Components</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="Components"><span class="title">Components</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/censor-core/projects.html" class="" aria-label="Project Structure"><!--[--><!--]--> Project Structure <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/censor-core/ai-components.html" class="" aria-label="AI/ML Components"><!--[--><!--]--> AI/ML Components <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a aria-current="page" href="/censor-core/censoring-components.html" class="router-link-active router-link-exact-active router-link-active" aria-label="Censoring Components"><!--[--><!--]--> Censoring Components <!--[--><!--]--></a></li><!--]--></ul><!--]--></div></div><div class="navbar-item"><a class="external-link" href="https://github.com/silveredgold/censor-core" rel="noopener noreferrer" target="_blank" aria-label="GitHub"><!--[--><!--]--> GitHub <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><button class="toggle-dark-button" title="toggle dark mode"><svg style="" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg style="display:none;" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><!----></div></header><!--]--><div class="sidebar-mask"></div><!--[--><aside class="sidebar"><nav class="navbar-items"><!--[--><div class="navbar-item"><a href="/censor-core/" class="" aria-label="Introduction"><!--[--><!--]--> Introduction <!--[--><!--]--></a></div><div class="navbar-item"><a href="/censor-core/usage" class="" aria-label="Usage"><!--[--><!--]--> Usage <!--[--><!--]--></a></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="Components"><span class="title">Components</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="Components"><span class="title">Components</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/censor-core/projects.html" class="" aria-label="Project Structure"><!--[--><!--]--> Project Structure <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/censor-core/ai-components.html" class="" aria-label="AI/ML Components"><!--[--><!--]--> AI/ML Components <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a aria-current="page" href="/censor-core/censoring-components.html" class="router-link-active router-link-exact-active router-link-active" aria-label="Censoring Components"><!--[--><!--]--> Censoring Components <!--[--><!--]--></a></li><!--]--></ul><!--]--></div></div><div class="navbar-item"><a class="external-link" href="https://github.com/silveredgold/censor-core" rel="noopener noreferrer" target="_blank" aria-label="GitHub"><!--[--><!--]--> GitHub <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><ul class="sidebar-items"><!--[--><li><p tabindex="0" class="sidebar-item sidebar-heading">Censoring Components <!----></p><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/censor-core/censoring-components.html#icensoringprovider" class="router-link-active router-link-exact-active sidebar-item" aria-label="ICensoringProvider"><!--[--><!--]--> ICensoringProvider <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/censor-core/censoring-components.html#imagesharpcensoringprovider" class="router-link-active router-link-exact-active sidebar-item" aria-label="ImageSharpCensoringProvider"><!--[--><!--]--> ImageSharpCensoringProvider <!--[--><!--]--></a><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/censor-core/censoring-components.html#icensortypeprovider" class="router-link-active router-link-exact-active sidebar-item" aria-label="ICensorTypeProvider"><!--[--><!--]--> ICensorTypeProvider <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/censor-core/censoring-components.html#iresultstransformer" class="router-link-active router-link-exact-active sidebar-item" aria-label="IResultsTransformer"><!--[--><!--]--> IResultsTransformer <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/censor-core/censoring-components.html#icensoringmiddleware" class="router-link-active router-link-exact-active sidebar-item" aria-label="ICensoringMiddleware"><!--[--><!--]--> ICensoringMiddleware <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><a aria-current="page" href="/censor-core/censoring-components.html#iresultparser" class="router-link-active router-link-exact-active sidebar-item" aria-label="IResultParser"><!--[--><!--]--> IResultParser <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><blockquote><p>This is going to be <strong>a lot of moving parts</strong>. This is partially by design and partially a result of rapidly changing ideas and requirements. I really can&#39;t guarantee API stability for much of this at this early stage.</p></blockquote><h2 id="icensoringprovider" tabindex="-1"><a class="header-anchor" href="#icensoringprovider" aria-hidden="true">#</a> <code>ICensoringProvider</code></h2><blockquote><p>This is the big one</p></blockquote><p><code>ICensoringProvider</code> is the basic interface for censoring an image after it&#39;s been classified by the <a href="/censor-core/ai-components.html" class="">AI service</a>. In general, you want to take the <code>ImageResult</code> from the AI and pass it to the <code>ICensoringProvider</code>, optionally with a results parser. From there, the censoring provider will censor the image and return the censored result.</p><h2 id="imagesharpcensoringprovider" tabindex="-1"><a class="header-anchor" href="#imagesharpcensoringprovider" aria-hidden="true">#</a> <code>ImageSharpCensoringProvider</code></h2><p>This is the default censoring provider for CensorCore.</p><blockquote><p>It is <strong>strongly</strong> recommended to use the <code>ImageSharpCensoringProvider</code> as your <code>ICensoringProvider</code> implementation. It has its own extensibility points for customisations.</p></blockquote><p>This provider uses ImageSharp to load and modify the image being censored, relying on &quot;censor type providers&quot; (see below) for the real work of censoring the image. The <code>ImageSharpCensoringProvider</code> will (to greatly oversimplify things), loop through the results from the AI, run any transformers (see below), run any middlewares (see below), match results against a censor type to get the required image modification (i.e the censoring bit), then apply the results of all of the above onto the image to produce a censored image.</p><p>That design of deferring the image editing does mean that censor types cannot depend on one another, but it also makes it much harder to cause accidental conflicts/cancellations.</p><h3 id="icensortypeprovider" tabindex="-1"><a class="header-anchor" href="#icensortypeprovider" aria-hidden="true">#</a> <code>ICensorTypeProvider</code></h3><p>The censor type provider is an implementation of <code>ICensorTypeProvider</code> and is responsible for the different censoring methods. For example, blurring and pixelation are two of the available providers. Each provider is passed the unmodified source image, the details of the current match, and a results parser if one is available. The provider can then (optionally) return the modification it wants to make to the image.</p><blockquote><p>There&#39;s a whole bunch of censor types included with CensorCore: blurring, pixelation, and black bar, sticker and caption overlays.</p></blockquote><p>Note that the modification is not <em>immediately</em> applied to the source image, the provider just stores it for later application.</p><h3 id="iresultstransformer" tabindex="-1"><a class="header-anchor" href="#iresultstransformer" aria-hidden="true">#</a> <code>IResultsTransformer</code></h3><blockquote><p>Use this with caution! If an <code>IResultsTransformer</code> doesn&#39;t return a match, it is <strong>dropped</strong> from the censoring session.</p></blockquote><p>The <code>IResultsTransformer</code> API is useful for transforming the results from the AI before the censoring begins, for changes that don&#39;t need the image data. For example, an <code>IResultsTransformer</code> can add new matches based on existing AI matches, or add/remove matches to be passed to the censoring providers. For a more grounded example, one of the bundled transformers applies a flat scaling to increase/decrease the size of the matches returned by the AI.</p><p>A no-op transformer can simply return the match collection it was passed.</p><h3 id="icensoringmiddleware" tabindex="-1"><a class="header-anchor" href="#icensoringmiddleware" aria-hidden="true">#</a> <code>ICensoringMiddleware</code></h3><blockquote><p>Use this with caution! This API is very easy to get wrong, and is <em>usually</em> only a last resort for niche use cases.</p></blockquote><p>As the name implies, censoring middleware is an abstraction for more complex and niche censoring needs that need access to more of the censoring session. They can also add new mutations to the image but <em>cannot</em> modify/remove other censors. Since they are executed sequentially and block censoring until completed, you should try and keep middleware as fast as possible.</p><h2 id="iresultparser" tabindex="-1"><a class="header-anchor" href="#iresultparser" aria-hidden="true">#</a> <code>IResultParser</code></h2><p>The result parser is a special type that should be provided by <em>consumers</em> of CensorCore. The result parser can be injected into the <code>ImageSharpCensoringProvider</code> or passed per-request to the current censoring provider. The result parser is what the censor type providers query to tweak whether the censoring should be applied and/or how aggressively.</p><!--]--></div><footer class="page-meta"><div class="meta-item edit-link"><a class="external-link meta-item-label" href="https://github.com/silveredgold/censor-core/edit/main/docs/censoring-components.md" rel="noopener noreferrer" target="_blank" aria-label="Edit this page"><!--[--><!--]--> Edit this page <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><div class="meta-item last-updated"><span class="meta-item-label">Last Updated: </span><!----></div><div class="meta-item contributors"><span class="meta-item-label">Contributors: </span><span class="meta-item-info"><!--[--><!--[--><span class="contributor" title="email: 35001040+silveredgold@users.noreply.github.com">Silvered Gold</span><!----><!--]--><!--]--></span></div></footer><!----><!--[--><!--]--></main><!--]--></div><!----><!--]--></div>
    <script type="module" src="/censor-core/assets/app.0a9f3bc6.js" defer></script>
  </body>
</html>
